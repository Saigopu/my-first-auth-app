<!DOCTYPE html>
<html>
  <head>
    <title>MyOnlineMeal.com</title>
    <link rel="stylesheet" href="styles1.css" />
    <!-- The core Firebase JS SDK is always required and must be listed first -->

    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=Truculenta:wght@300&display=swap"
      rel="stylesheet"
    />
  </head>

  <body>
    <div class="login" id="login_div">
      <!-- <img id="loginicon" src="proicon.png"  style="align:centre" >  -->
      <h1>Sign In</h1>
      <form>
        <input
          type="email"
          class="login-box"
          id="email"
          name="email"
          placeholder="Email"
          required
        />
        <input
          type="password"
          class="login-box"
          id="password"
          name="pass"
          placeholder="Password"
          required
        />
      </form>
      <button class="Button2" id="sin" >Sign in</button>
      <a
        href="reset.html"
        style="
          text-decoration: none;
          color: #1877f2;
          font-family: inherit;
          font-size: 16px;
          font-weight: 500;
        "
        >Forgotten Password?</a
      >
    </div>
    <p id="animi">KEEP WRITING</p>
  </body>
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.4.0/firebase-app.js";
    import {
      getDatabase,
      set,
      ref,
    } from "https://www.gstatic.com/firebasejs/9.4.0/firebase-database.js";
    import {
      getAuth,
      signInWithEmailAndPassword,
    } from "https://www.gstatic.com/firebasejs/9.4.0/firebase-auth.js";
    // Your web app's Firebase configuration.
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    var firebaseConfig = {
      apiKey: "AIzaSyDtGeLOE1pPLd-8IzV8f1RZUfr2UAVnYZI",
      authDomain: "online-meal-280c1.firebaseapp.com",
      projectId: "online-meal-280c1",
      storageBucket: "online-meal-280c1.appspot.com",
      messagingSenderId: "662721131983",
      appId: "1:662721131983:web:373723683c1b0d8c564eba",
      measurementId: "G-9PSGT1BPS0",
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const database = getDatabase(app);
    // firebase.analytics();
    const auth = getAuth();

    // function signIn() {
    //   var Email = document.getElementById("email");
    //   var pass = document.getElementById("password");
    //   const promise = signInWithEmailAndPassword(auth, Email.value, pass.value);
    //   promise.catch((e) => alert(e.message));
    //   promise.then((user) => {
    //     console.log("Signed In as " + Email.value);
    //     window.location.href = "final2.html";
    //     localStorage.setItem("current", Email.value);
    //   });
    // }

    const signIn = async () => {
      const Email = document.getElementById("email").value;
      const Password = document.getElementById("password").value;
      console.log(Email);
      try {
        await signInWithEmailAndPassword(auth, Email, Password);
        alert("Signed In");
        console.log("Signed In as " + Email.value);
        window.location.href = "first_home.html";
        localStorage.setItem("current", Email.value);
      } catch (error) {
        console.log(`There was an error: ${error}`);
        alert(error.message + " Try again.");
      }
    };

    sin.addEventListener("click", signIn);

    function SignOut() {
      auth.signOut().then(() => {
        alert("Thankyou...");
        window.location.href = "login.html";
        localStorage.removeItem("current");
      });
    }
  </script>
</html>
